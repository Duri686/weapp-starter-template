<!-- src/pages/login/index.wxml -->
<!-- 登录页面（简化为 Vant Weapp 原生风格） -->
<view class="login-container">
  <!-- 登录方式切换：使用 van-tabs -->
  <van-tabs active="{{loginType}}" bind:change="onLoginTypeChange">
    <van-tab title="微信登录" name="wx"></van-tab>
    <van-tab title="手机登录" name="phone"></van-tab>
  </van-tabs>
  <!-- 微信登录 -->
  <view class="section" wx:if="{{loginType === 'wx'}}">
    <van-button type="primary" block round custom-class="mt-16" icon="wechat" loading="{{loading}}" disabled="{{loading}}" bind:click="onWxLogin">
      微信一键登录
    </van-button>
    <van-button type="success" block round custom-class="mt-12" icon="phone" open-type="getPhoneNumber" loading="{{loading}}" disabled="{{loading}}" bind:getphonenumber="onGetPhoneNumber">
      微信手机号登录
    </van-button>
  </view>
  <!-- 手机号登录 -->
  <view class="section" wx:if="{{loginType === 'phone'}}">
    <van-field value="{{phoneNumber}}" label="手机号" type="number" maxlength="11" placeholder="请输入手机号" border bind:change="onPhoneInput" />
    <view class="row mt-12">
      <van-field class="flex-1" value="{{verifyCode}}" label="验证码" type="number" maxlength="6" placeholder="请输入验证码" border bind:change="onCodeInput" />
      <van-button size="small" type="primary" class="ml-12" disabled="{{countdown > 0}}" bind:click="onSendCode">
        <block wx:if="{{countdown > 0}}">{{countdown}}s</block>
        <block wx:else>发送验证码</block>
      </van-button>
    </view>
    <van-button type="primary" block round loading="{{loading}}" disabled="{{loading || !phoneNumber || !verifyCode}}" bind:click="onPhoneLogin">
      登录
    </van-button>
  </view>
  <!-- 用户协议 -->
  <view class="agreement-section">
    <text class="agreement-text">
      登录即表示同意
      <text class="link-text">《用户协议》</text>
      和
      <text class="link-text">《隐私政策》</text>
    </text>
  </view>
</view>